:: StoryTitle
Spuk & Schreck


:: StoryData
{
  "ifid": "FB483649-96B3-4F0F-9531-A1D615413B45",
  "format": "SugarCube",
  "format-version": "2.36.1",
  "start": "installation",
  "tag-colors": {
    "fightRoom": "red",
    "fightroom": "red",
    "saeulengang": "yellow"
  },
  "zoom": 0.6
}


:: 1.0 {"position":"1700,600","size":"100,100"}
<script>
$('#story').attr('style', 'background-image:url(images/kapitel.jpg)');
</script>

<div class="wrapper">
  <h4>Tatort 1</h4>
  <h1>Achtung!</h1>
  <h2>Paranormale Aktivität.</h2>
  </div>

  <div class="btn-group">
    <<button "Zurück">>
      <<goto "map.init">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Betreten">>
      <<goto "1.1">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 1.1 {"position":"1700,800","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/1.1.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "1.1">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Ok">>
      <<goto "1.2">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 1.2 {"position":"1700,1000","size":"100,100"}
<<if $riddle is 1>>
    <script>
      $('#story').attr('style', 'background-image:url(images/1.1.jpg)');
    </script>
    <<elseif $riddle is 2>>
    <script>
      $('#story').attr('style', 'background-image:url(images/1.2.jpg)');
    </script>
    <<elseif $riddle is 3>>
    <script>
      $('#story').attr('style', 'background-image:url(images/1.3.jpg)');
    </script>
    <<elseif $riddle is 4>>
    <script>
      $('#story').attr('style', 'background-image:url(images/bg.jpg)');
    </script>
  <</if>>

  <<if $riddle is 1>>
    <span id="heading">
      <h2>Finde dieses Bild. Was befindet sich darüber?</h2>
    </span>

    <div class="wrapper"></div>

    <div class="btn-group">
      <<button "Lilie">>
        <<replace "#heading">><h2>Falsch!</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Sanduhr">>
        <<replace "#heading">><h2>Falsch!</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Muschel">>
        <<replace "#heading">><h2>Richtig! +10 Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $koinz to $koinz +10>>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
    </div>
  <</if>>

  <<if $riddle is 2>>
    <span id="heading">
      <h2>Hier wird eine Frage stehen, welche die Spieler beantworten müssen.</h2>
    </span>

    <div class="wrapper"></div>

    <div class="btn-group">
      <<button "Falsch">>
        <<replace "#heading">><h2>Falsch!</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">><<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Richtig">>
        <<replace "#heading">><h2>Richtig! +10 Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $koinz to $koinz +10>>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Falsch">>
        <<replace "#heading">><h2>Falsch!</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
    </div>
  <</if>>

  <<if $riddle is 3>>
    <span id="heading">
      <h2>Hier wird eine Frage stehen, welche die Spieler beantworten müssen.</h2>
    </span>

    <div class="wrapper"></div>
        
    <div class="btn-group">
      <<button "Richtig">>
        <<replace "#heading">><h2>Richtig! +10 Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $koinz to $koinz +10>>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
          
      <<button "Falsch">>
        <<replace "#heading">><h2>Falsch!</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Falsch">>
        <<replace "#heading">><h2>Falsch!</h2><</replace>>
        <<timed 1s>>
          <<goto "1.2">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
    </div>
  <</if>>

  <<if $riddle is 4>>
    <div class="wrapper">
      <h1>Okkultes<br>Symbol</h1>
      <p class="p2">A</p>
    </div>

    <div class="btn-group">
      <<button "Weiter">>
        <<goto "1.3">>
        <<set $riddle to 1>>
        <<set $letter4 to 1>>
        <<audio "click" play>>  
      <</button>>
    </div>
  <</if>>


:: 1.3 {"position":"1700,1200","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/1.3.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "1.1">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Weiter">>
      <<goto "1.4">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 1.4 {"position":"1700,1400","size":"100,100"}
<div class="wrapper">
  <model-viewer id="model-viewer" src="models/witch/witch.glb" ar auto-rotate poster="models/witch/poster.webp" 
    autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
    alt="A witch" camera-controls>
    <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
    </model-viewer>
  </div>

  <div class="btn-group">
    <<button "Weiter">>
      <<goto "1.5">>
      <<set $riddle to 1>>
      <<audio "click" play>>  
    <</button>>
  </div>


:: 1.5 {"position":"1700,1600","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <<audio ":playing:" stop>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/1.5.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "1.5">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Weiter">>
      <<goto "ende.1">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 10.1 {"position":"3498,601","size":"100,100"}
<<set $schildkroete to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/schildkroete/schildkroete.glb"
              ios-src="models/schildkroete/schildkroete.usdz"
			  alt="Schildkröte"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 11.1 {"position":"3700,600","size":"100,100"}
<<set $ozelot to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/ozelot/ozelot.glb"
              ios-src="models/ozelot/ozelot.usdz"
			  alt="Ozelot"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 12.1 {"position":"3900,598","size":"100,100"}
<<set $schwein to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/schwein/schwein.glb"
              ios-src="models/schwein/schwein.usdz"
			  alt="Schwein"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 13.1 {"position":"4100,600","size":"100,100"}
<<set $truthahn to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/truthahn/truthahn.glb"
              ios-src="models/truthahn/truthahn.usdz"
			  alt="Truthahn"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 14.1 {"position":"4300,600","size":"100,100"}
<<set $zebra to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/zebra/zebra.glb"
              ios-src="models/zebra/zebra.usdz"
			  alt="Zebra"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 15.1 {"position":"4500,600","size":"100,100"}
<<set $affe to 1>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
			  src="models/affe/affe.glb"
              ios-src="models/affe/affe.usdz"
              alt="Affe"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 16.1 {"position":"4700,600","size":"100,100"}
<<set $eule to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/eule/eule.glb"
              ios-src="models/eule/eule.usdz"
			  alt="Eule"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 17.1 {"position":"4900,600","size":"100,100"}
<<set $gazelle to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/gazelle/gazelle.glb"
              ios-src="models/gazelle/gazelle.usdz"
			  alt="Gazelle"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 18.1 {"position":"5100,600","size":"100,100"}
<<set $katze to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/katze/katze.glb"
              ios-src="models/katze/katze.usdz"
			  alt="Katze"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 19.1 {"position":"5300,600","size":"100,100"}
<<set $krokodil to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/krokodil/krokodil.glb"
              ios-src="models/krokodil/krokodil.usdz"
			  alt="Krokodil"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 2.0 {"position":"1900,600","size":"100,100"}
<script>
$('#story').attr('style', 'background-image:url(images/kapitel.jpg)');
</script>

<div class="wrapper">
  <h4>Tatort 2</h4>
  <h1>Achtung!</h1>
  <h2>Paranormale Aktivität.</h2>
  </div>

  <div class="btn-group">
    <<button "Betreten">>
      <<goto "2.1">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 2.1 {"position":"1900,800","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/2.1.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "2.1">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Ok">>
      <<goto "2.2">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 2.2 {"position":"1900,1000","size":"100,100"}
<script>
  $('#story').attr('style', 'background-image:url(images/cam.jpg)');
</script>

<div class="wrapper">
  <h1>Spektral Kamera</h1>
  <h2>Öffne die Kamera und betrachte die Szene. Mache Fotos von allem was dir wichtig erscheint.</h2>
  <model-viewer id="model-viewer" src="models/witch/witch.glb" ar auto-rotate poster="models/witch/poster.webp" 
    autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
    alt="A witch" camera-controls>
    <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  </div>

  <div class="btn-group">
    <<button "Weiter">>
      <<goto "2.3">>
      <<set $riddle to 1>>
      <<audio "click" play>>  
    <</button>>
  </div>


:: 2.3 {"position":"1900,1200","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/2.3.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "2.3">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Weiter">>
      <<goto "2.4">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 2.4 {"position":"1900,1400","size":"100,100"}
<script>
      $('#story').attr('style', 'background-image:url(images/holger.bg.jpg)');
    </script>

  <<if $riddle is 1>>
    <span id="heading">
    <h1>Frage 1</h1>
      <h2>Was für ein Gerät stand in der Szene?</h2>
    </span>

    <div class="wrapper"></div>

    <div class="btn-group">
      <<button "Walkie-Talkie">>
        <<replace "#heading">><h1>Falsch!</h1><h2>Keine Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Häxler">>
        <<replace "#heading">><h1>Falsch!</h1><h2>Keine Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Grammophon">>
        <<replace "#heading">><h1>Richtig!</h1><h2>+10 Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $koinz to $koinz +10>>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
    </div>
  <</if>>

  <<if $riddle is 2>>
    <span id="heading">
    <h1>Frage 2</h1>
      <h2>Was für ein Gegenstand lag im Vogelbad?</h2>
    </span>

    <div class="wrapper"></div>

    <div class="btn-group">
      <<button "Haarspange">>
        <<replace "#heading">><h1>Falsch!</h1><h2>Keine Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">><<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Schlüssel">>
        <<replace "#heading">><h1>Richtig!</h1><h2>+10 Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $koinz to $koinz +10>>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Brosche">>
        <<replace "#heading">><h1>Falsch!</h1><h2>Keine Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
    </div>
  <</if>>

  <<if $riddle is 3>>
    <span id="heading">
    <h1>Frage 3</h1>
      <h2>Was lag neben dem Brunnen?</h2>
    </span>

    <div class="wrapper"></div>
        
    <div class="btn-group">
      <<button "Ketten">>
        <<replace "#heading">><h1>Richtig!</h1><h2>+10 Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $koinz to $koinz +10>>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
          
      <<button "Flaschen">>
        <<replace "#heading">><h1>Falsch!</h1><h2>Keine Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>

      <<button "Gliedmaßen">>
        <<replace "#heading">><h1>Falsch!</h1><h2>Keine Punkte</h2><</replace>>
        <<timed 1s>>
          <<goto "2.4">>
          <<set $riddle to $riddle + 1>>
        <</timed>>
      <</button>>
    </div>
  <</if>>

  <<if $riddle is 4>>
    <div class="wrapper">
      <h1>Okkulte Rune</h1>
      <h2>Ihr habt eine okkulte Rune entdeckt.</h2>
      <p class="p2">A</p>
    </div>

    <div class="btn-group">
      <<button "Weiter">>
        <<goto "2.5">>
        <<set $riddle to 1>>
        <<set $letter4 to 1>>
        <<audio "click" play>>  
      <</button>>
    </div>
  <</if>>


:: 2.5 {"position":"1900,1600","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/2.5.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "2.5">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Weiter">>
      <<goto "2.6">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 2.6 {"position":"1900,1800","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/2.6.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "Nochmal">>
      <<goto "2.6">>	
      <<audio "click" play>>	
    <</button>>
    <<button "Weiter">>
      <<goto "2.7">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: 2.7 {"position":"1900,2000","size":"100,100"}
<div
 class="wrapper">
  <h1>Euer Feedback</h1>
  <h2>Wir wollen ein Team-Event kreieren, bei dem sich die Menschen draußen an der frischen Luft bewegen, zusammen arbeiten, um Rätsel zu lösen und mit Hilfe moderner Technik in neue gruselige Welten eintauchen. 
  <br>
  <br>Unser Ziel ist Ostern 2024 die erste Rallye im Friedenspark, Leipzig zu veröffentlichen. Weitere Städte werden folgen. 
  <br>
  <br>Unsere Rallye wird ausschließlich auf den Smartphones unserer Kunden gespielt. Es gibt keinen Guide vor Ort. Daher ist es uns sehr wichtig, dass die Technik gut funktioniert. 
  <br>
  <br>
  Um zu evaluieren, ob uns das gelingt benötigen wir euer Feedback. Unter diesem <a href="https://forms.gle/9DVsp9kHYV9bD6rq8">"Link"</a>  gelangt ihr zu unserem Fragebogen. Vielen Dank. 
</h2>
</div>

<div class="btn-group">

</div>


:: 20.1 {"position":"5500,600","size":"100,100"}
<<set $lama to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/lama/lama.glb"
              ios-src="models/lama/lama.usdz"
			  alt="lama"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 3.1 {"position":"2100,600","size":"100,100"}
<div class="wrapper">
<h1>Grauer Hof</h1>
<h2>Löse die Rätsel, um einen Geheimbuchstaben zu bekommen.</h2>
<img src="images/3.1.jpg" class="image1" />
</div>

<div class="btn-group">

<<button "Weiter">>
  <<goto "3.2">><<audio "click" play>>
<</button>>
</div>


:: 3.2 {"position":"2100,800","size":"100,100"}
<video autoplay loop id="myVideo" playsinline>
  <source src="videos/3.2.mp4" type="video/mp4">
</video>

<div class="wrapper">

</div>

<div class="btn-group">

	<<button "Weiter">>
	    <<goto "3.3">>
	<<audio "click" play>>
<</button>>	

</div>


:: 3.3 {"position":"2100,1000","size":"100,100"}
<<if
 $riddle is 1>>
<h1>Rätsel</h1>
 <span id="heading"><h2>Bürsten, Besen ... 
</h2></span>

<div class="wrapper">
<img src="images/3.3.jpg" 
class="image1" />
</div>

<div class="btn-group">

 <<button "Seife">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "3.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Nägel">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "3.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Pinsel">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "3.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>




</div>


<</if>>

<<if $riddle is 2>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Hoher ...?</h2></span>

<div class="wrapper">
<img src="images/3.4.jpg" 
class="image1" />
</div>

<div class="btn-group">
    
 <<button "Träger">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "3.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Turm">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "3.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Posten">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "3.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>



</div>


<</if>>

<<if $riddle is 3>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Stadt ...?</h2></span>

<div class="wrapper">
<img src="images/3.5.jpg" 
class="image1" />
</div>
    
<div class="btn-group">

 <<button "Archiv">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "3.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>
    
 <<button "Verwaltung">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "3.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Reinigung">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "3.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 4>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast einen Geheimbuchstaben entdeckt.</h2>
<h4>O</h4>
</div>

<div class="btn-group">
<<button "Weiter">>
      <<goto "map.init">><<set $riddle to 
1>><<set $letter2 to 1>>
<<audio "click" play>>  
<</button>>
</div>

<</if>>


:: 4.1 {"position":"2301,600","size":"100,100"}
<div class="wrapper">
<h1>Markt</h1>
<h2>Löse die Rätsel, um einen Geheimbuchstaben zu bekommen.</h2>
<img src="images/4.1.jpg" class="image1" />
</div>

<div class="btn-group">

<<button "Weiter">>
  <<goto "4.2">><<audio "click" play>>
<</button>>
</div>


:: 4.2 {"position":"2300,800","size":"100,100"}
<video autoplay loop id="myVideo" playsinline>
  <source src="videos/4.2.mp4" type="video/mp4">
</video>

<div class="wrapper">
</div>

<div class="btn-group">

	<<button "Weiter">>
	    <<goto "4.3">>
	<<audio "click" play>>
<</button>>	

</div>


:: 4.3 {"position":"2300,1000","size":"100,100"}
<<if
 $riddle is 1>>
<h1>Rätsel</h1>
 <span id="heading"><h2>Ich bin ein 
...?</h2></span>

<div class="wrapper">
<img src="images/4.3.jpg" 
class="image1" />
</div>

<div class="btn-group">

 <<button "Hund">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "4.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Drache">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "4.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Lurch">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "4.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 2>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Wer ist nicht zu 
sehen?</h2></span>

<div class="wrapper">
<img src="images/4.4.jpg" 
class="image1" />
</div>

<div class="btn-group">
    
 <<button "Fisch">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "4.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Robbe">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "4.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Affe">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "4.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>



</div>


<</if>>

<<if $riddle is 3>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Mein Nachbar heißt 
Herr...</h2></span>

<div class="wrapper">
<img src="images/4.5.jpg" 
class="image1" />
</div>
    
<div class="btn-group">

 <<button "Adler">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "4.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>
    
 <<button "Krömer">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "4.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Mauser">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "4.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 4>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast einen Geheimbuchstaben entdeckt.</h2>
<h4>R</h4>
</div>

<div class="btn-group">
<<button "Weiter">>
      <<goto "map.init">><<set $riddle to 
1>><<set $letter1 to 1>>
<<audio "click" play>>  
<</button>>
</div>

<</if>>


:: 5.1 {"position":"2500,600","size":"100,100"}
<div class="wrapper">
<h1>Holzmarkt</h1>
<h2>Löse die Rätsel, um einen Geheimbuchstaben zu bekommen.</h2>
<img src="images/5.1.jpg" class="image1" />
</div>

<div class="btn-group">

<<button "Weiter">>
  <<goto "5.2">><<audio "click" play>>
<</button>>
</div>


:: 5.2 {"position":"2500,800","size":"100,100"}
<video autoplay loop id="myVideo" playsinline>
  <source src="videos/5.2.mp4" type="video/mp4">
</video>

<div class="wrapper">

</div>

<div class="btn-group">

	<<button "Weiter">>
	    <<goto "5.3">>
	<<audio "click" play>>
<</button>>	

</div>


:: 5.3 {"position":"2500,1000","size":"100,100"}
<<if
 $riddle is 1>>
<h1>Rätsel</h1>
 <span id="heading"><h2>Ganz klar ein 
...?</h2></span>

<div class="wrapper">
<img src="images/5.3.jpg" 
class="image1" />
</div>

<div class="btn-group">

 <<button "Rabuschki">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "5.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Womitzki">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "5.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Remitschka">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "5.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 2>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Spaß zu ...?</h2></span>

<div class="wrapper">
<img src="images/5.4.jpg" 
class="image1" />
</div>

<div class="btn-group">
    
 <<button "Hause">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "5.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Viert">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "5.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Laut">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "5.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 3>>

<h1>Rätsel</h1>
 <span id="heading"><h2>... dich!</h2></span>

<div class="wrapper">
<img src="images/5.5.jpg" 
class="image1" />
</div>
    
<div class="btn-group">
    
 <<button "Freu">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "5.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Setz">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "5.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Halt">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "5.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 4>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast einen Geheimbuchstaben entdeckt.</h2>
<h4>L</h4>
</div>

<div class="btn-group">
<<button "Weiter">>
      <<goto "map.init">><<set $riddle to 
1>><<set $letter5 to 1>>
<<audio "click" play>>  
<</button>>
</div>

<</if>>


:: 6.1 {"position":"2700,600","size":"100,100"}
<div class="wrapper">
<h1>Großer Halken</h1>
<h2>Löse die Rätsel, um einen Geheimbuchstaben zu bekommen.</h2>
<img src="images/6.1.jpg" class="image1" />
</div>

<div class="btn-group">

<<button "Weiter">>
  <<goto "6.2">><<audio "click" play>>
<</button>>
</div>


:: 6.2 {"position":"2700,800","size":"100,100"}
<video autoplay loop id="myVideo" playsinline>
  <source src="videos/6.2.mp4" type="video/mp4">
</video>

<div class="wrapper">

</div>

<div class="btn-group">

	<<button "Weiter">>
	    <<goto "6.3">>
	<<audio "click" play>>
<</button>>	

</div>


:: 6.3 {"position":"2700,1001","size":"100,100"}
<<if
 $riddle is 1>>
<h1>Rätsel</h1>
 <span id="heading"><h2>Ergibt zusammen 
...?</h2></span>

<div class="wrapper">
<img src="images/6.3.jpg" 
class="image1" />
</div>

<div class="btn-group">

 <<button "1367">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "6.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "1731">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "6.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "1805">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "6.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 2>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Ich habe einen 
...?</h2></span>

<div class="wrapper">
<img src="images/6.4.jpg" 
class="image1" />
</div>

<div class="btn-group">
    
 <<button "Regenschirm">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "6.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Bruder">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "6.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Raben">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "6.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 3>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Deckel für den oder das 
...?</h2></span>

<div class="wrapper">
<img src="images/6.5.jpg" 
class="image1" />
</div>
    
<div class="btn-group">
    
 <<button "Topf">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "6.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Kelch">>
   <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "6.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Fass">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "6.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 4>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast einen Geheimbuchstaben entdeckt.</h2>
<h4>E</h4>
</div>

<div class="btn-group">
<<button "Weiter">>
      <<goto "map.init">><<set $riddle to 
1>><<set $letter7 to 1>>
<<audio "click" play>>  
<</button>>
</div>

<</if>>


:: 7.1 {"position":"2900,600","size":"100,100"}
<div class="wrapper">
<h1>Rabenturm</h1>
<h2>Löse die Rätsel, um einen Geheimbuchstaben zu bekommen.</h2>
<img src="images/7.1.jpg" class="image1" />
</div>

<div class="btn-group">

<<button "Weiter">>
  <<goto "7.2">><<audio "click" play>>
<</button>>
</div>


:: 7.2 {"position":"2900,801","size":"100,100"}
<video autoplay loop id="myVideo" playsinline>
  <source src="videos/7.2.mp4" type="video/mp4">
</video>

<div class="wrapper">

</div>

<div class="btn-group">

	<<button "Weiter">>
	    <<goto "7.3">>
	<<audio "click" play>>
<</button>>	

</div>


:: 7.3 {"position":"2900,1000","size":"100,100"}
<<if
 $riddle is 1>>
<h1>Rätsel</h1>
 <span id="heading"><h2>Du alte ...?</h2></span>

<div class="wrapper">
<img src="images/7.3.jpg" 
class="image1" />
</div>

<div class="btn-group">

 <<button "Klingel">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "7.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Glocke">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "7.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Klinke">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "7.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 2>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Genau 9 ...?</h2></span>

<div class="wrapper">
<img src="images/7.4.jpg" 
class="image1" />
</div>

<div class="btn-group">
    
 <<button "Zinnen">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "7.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Stangen">>
    <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "7.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Stufen">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "7.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 3>>

<h1>Rätsel</h1>
 <span id="heading"><h2>Kein ...?</h2></span>

<div class="wrapper">
<img src="images/7.5.jpg" 
class="image1" />
</div>
    
<div class="btn-group">
    
 <<button "Erfinder">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "7.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

 <<button "Maurer">>
   <<replace "#heading">><h2>Richtig! +10 
Punkte</h2><</replace>><<audio "success" 
play>>
      <<timed 1s>>
        <<goto "7.3">><<set $koinz to $koinz 
+10>><<set $riddle to $riddle + 1>>
        <</timed>>
<</button>>

 <<button "Konstukteur">>
    <<replace 
"#heading">><h2>Falsch!</h2><</replace>><<audio
 "falsch" play>>
      <<timed 1s>>
        <<goto "7.3">><<set $riddle to $riddle + 
1>>
        <</timed>>
<</button>>

</div>


<</if>>

<<if $riddle is 4>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast einen Geheimbuchstaben entdeckt.</h2>
<h4>I</h4>
</div>

<div class="btn-group">
<<button "Weiter">>
      <<goto "map.init">><<set $riddle to 
1>><<set $letter6 to 1>>
<<audio "click" play>>  
<</button>>
</div>

<</if>>


:: 8.1 {"position":"3100,600","size":"100,100"}
<<set $schlange to 1>>

<script>
  $('#story').attr('style', 'background-image:url(images/bg.jpg');
</script>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/schlange/schlange.glb"
              ios-src="models/schlange/schlange.usdz"
			  alt="Schlange"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: 9.1 {"position":"3300,600","size":"100,100"}
<<set $pferd to 1>>

<<audio "success" play>>

<div class="wrapper">
<h1>Hurra!</h1>
<h2>Du hast ein Geheimtier entdeckt!
<br>Klicke auf den Würfel, um ein Foto damit zu machen.
<br>
<br>
Gefundene Tiere werden im Menü unter "Meine Tiere" gespeichert.</h2>

<model-viewer ar
              ar-modes="scene-viewer webxr quick-look"
poster="images/loading.png"
              src="models/pferd/pferd.glb"
              ios-src="models/pferd/pferd.usdz"
			  alt="Pferd"
			  auto-rotate>
</model-viewer>

</div>

<div class="btn-group">
<<button "Zurück">>
      <<goto "map.init">><<set $riddle to 1>>
<<audio "click" play>>  
<</button>>
</div>


:: AR {"position":"500,2800","size":"100,100"}
<div
 class="wrapper">
<h1>Geister Kamera</h1>
<h2>
Super. Dann kommen wir mal zu eurem Hauptwerkzeug - der Kamera. Damit 
könnt ihr Geister aufspüren, die ihr mit dem bloßen Auge nicht sehen 
könnt.
<br>
<br>
Außerdem könnt ihr damit wichtige Beweisfotos machen. Die brauchen wir 
für unsere Dokumentation. Sonst könnten die Kunden ja sagen, wir hätten 
gar nichts gemacht. 
<br>
<br>
Probiert die Kamera mal aus. Wenn alles funktioniert, solltet ihr damit 
unsere Hausgeist sehen. 
</h2>
</div>

<div class="btn-group">
	<<button "Weiter">>
    	<<goto "AR.ModelViewer">>	
<<audio "click" play>>	
<</button>>
</div>


:: AR.ModelViewer {"position":"500,3000","size":"100,100"}
<div class="wrapper">
<h1>Model Viewer</h1>
<h2>Klickt auf "View in your space" und macht ein Foto.</h2>
  <model-viewer id="model-viewer" src="models/witch/witch.glb" ar auto-rotate poster="models/witch/poster.webp" 
    autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
    alt="A witch" camera-controls>
    <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
    </model-viewer>
</div>

<div class="btn-group">
	<<button "Weiter">>
    	<<goto "friedenspark">>	
<<audio "click" play>>	
<</button>>
</div>


:: Dev {"position":"200,1200","size":"100,100"}
<div class="wrapper">
  <div class="btn-group">
      <<button "1.0">>
      <<goto "1.0">>	
    <</button>>
    <<button "2.0">>
      <<goto "2.0">>	
    <</button>>
    <<button "Karte">>
      <<goto "map.init">>	
    <</button>>
    <<button "Zurück" `previous()`>>
      <<audio "click" play>>
    <</button>>
  </div>
</div>


:: Hilfe {"position":"200,800","size":"100,100"}
<div class="wrapper">
  <h1>Hilfe</h1>
  <h2>Erkunde die Stationen auf der Karte, um geheime Geister zu 
    finden und Buchstaben für das Lösungswort zu sammeln.</h2>
  <details>
    <summary>
      <h5>Wo finde ich meinen Spielfortschritt?</h5>
    </summary>
    <div>
      <p>Deinen Spielfortschritt kannst du im
      <<link "Seitenmenü">>
	      <<script>>UIBar.unstow().show()<</script>>
      <</link>>
      einsehen.</p>
    </div>
  </details>
  <details>
    <summary>
      <h5>Was passiert, wenn ich das Lösungswort vollständig erraten habe?</h5>
    </summary>
    <div>
      <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet purus.</p>
    </div>
  </details>
  <details>
    <summary>
      <h5>Benötigt jeder Mitspielende ein eigenes Handy?</h5>
    </summary>
    <div>
      <p>Wir empfehlen das Spiel als Gruppe mit einem Handy zu spielen.
      Natürlich könnte ihr aber auch jeder alleine mit einem Handy losziehen.
      Es gibt keine vorgeschriebene Reihenfolge für die Stationen. 
      Am Ende könnt ihr vergleichen, wer mehr Punkte und Geister gesammelt hat.</p>
    </div>
  </details>
  <details>
    <summary>
      <h5>Wie kann ich die Rätsel lösen?</h5>
    </summary>
    <div>
      <p>Die Rätsel im Spiel können nur durch genaues Absuchen eurer Umgebung gelöst werden.
      Findet die Orte auf dem Bild und studiert sie genau.
      Dann findet ihr die Antwort. </p>
    </div>
  </details>
</div>

<div class="btn-group">
  <<return>>
</div>

:: Impressum {"position":"200,1000","size":"100,100"}
<div
 class="wrapper">
  <h1>Impressum</h1>
  <h2>Flamingo Flucht ist eine digitale Schnitzeljagd von <a 
href="https://www.geomazing.com/shop">"Geomazing"</a>, die in 
Kooperation mit der <a href="https://celloon.com/">"celloon 
GmbH"</a> und dem <a 
href="https://digitalwarenkombinat.de//">"Digitalwarenkombinat GbR"</a> für die <a 
href="https://wir-sind-aschersleben.de/">"Kaufmannsgilde in 
Aschersleben"</a> erstellt wurde.</h2>
<br>
  <h1>Gregor Assfalg</h1>
  <h2>Konzeption, Story, Gestaltung und Web-Development</h2>
  <h1>Mirko Kisser</h1>
  <h2>Projekt-Management</h2>
  <h1>Gerd Müller</h1>
  <h2>Web-Development-Support</h2>
  <h1>Eric Matyas</h1>
  <h2>Sound Design</h2>
  <br>
  <h1>Daten<br>schutz</h1>
<h2>Verantwortlicher für die Datenverarbeitung ist:
<br>
<br>
Gregor Assfalg
<br>Arno-Nitzsche-Str.11
<br>04277 Leipzig
<br>Deutschland
<br>
<br>
getlost@geomazing.com
<br>
<br>
1. Zugriffsdaten und Hosting
<br>
<br>
Sie können unsere Webseiten besuchen, ohne Angaben zu Ihrer Person zu 
machen. Bei jedem Aufruf einer Webseite speichert der Webserver 
lediglich automatisch ein sogenanntes Server-Logfile, das z.B. den Namen
 der angeforderten Datei, Ihre IP-Adresse, Datum und Uhrzeit des Abrufs,
 übertragene Datenmenge und den anfragenden Provider (Zugriffsdaten) 
enthält und den Abruf dokumentiert.
<br>
<br>
Diese Zugriffsdaten werden ausschließlich zum Zwecke der Sicherstellung 
eines störungsfreien Betriebs der Seite sowie der Verbesserung unseres 
Angebots ausgewertet. Dies dient gemäß Art. 6 Abs. 1 S. 1 lit. f DSGVO 
der Wahrung unserer im Rahmen einer Interessensabwägung überwiegenden 
berechtigten Interessen an einer korrekten Darstellung unseres Angebots.
 Alle Zugriffsdaten werden spätestens sieben Tage nach Ende Ihres 
Seitenbesuchs gelöscht.
<br>
<br>
Hostingdienstleistungen durch einen Drittanbieter
Im Rahmen einer Verarbeitung in unserem Auftrag erbringt ein 
Drittanbieter für uns die Dienste zum Hosting und zur Darstellung der 
Webseite. Alle Daten, die im Rahmen der Nutzung dieser Webseite oder in 
dafür vorgesehenen Formularen im Onlineshop wie folgend beschrieben 
erhoben werden, werden auf seinen Servern verarbeitet. Eine Verarbeitung
 auf anderen Servern findet nur in dem hier erläuterten Rahmen statt.
<br>
<br>
Dieser Dienstleister sitzt innerhalb eines Landes der Europäischen Union
 oder des Europäischen Wirtschaftsraums.
<br>
<br>
2. Datenerhebung und -verwendung zur Vertragsabwicklung, Kontaktaufnahme
<br>
<br>
Wir erheben personenbezogene Daten, wenn Sie uns diese im Rahmen Ihrer 
Bestellung oder bei einer Kontaktaufnahme mit uns (z.B. per 
Kontaktformular oder E-Mail) mitteilen. Pflichtfelder werden als solche 
gekennzeichnet, da wir in diesen Fällen die Daten zwingend zur 
Vertragsabwicklung, bzw. zur Bearbeitung Ihrer Kontaktaufnahme benötigen
 und Sie ohne deren Angabe die Bestellung nicht abschließen, bzw. die 
Kontaktaufnahme nicht versenden können. Welche Daten erhoben werden, ist
 aus den jeweiligen Eingabeformularen ersichtlich.
<br>
<br>
Wir verwenden die von ihnen mitgeteilten Daten gemäß Art. 6 Abs. 1 S. 1 
lit. b DSGVO zur Vertragsabwicklung und Bearbeitung Ihrer Anfragen. Nach
 vollständiger Abwicklung des Vertrages werden Ihre Daten für die 
Weitere Verarbeitung eingeschränkt und nach Ablauf etwaiger steuer- und 
handelsrechtlichen Aufbewahrungsfristen gelöscht, sofern Sie nicht 
ausdrücklich in eine Weitere Nutzung Ihrer Daten eingewilligt haben oder
 wir uns eine darüber hinausgehende Datenverwendung vorbehalten, die 
gesetzlich erlaubt ist und über die wir Sie in dieser Erklärung 
informieren.
<br>
<br>
3. DatenWeitergabe
<br>
<br>
Zur Vertragserfüllung gemäß Art. 6 Abs. 1 S. 1 lit. b DSGVO geben wir 
Ihre Daten an das mit der Lieferung beauftragte Versandunternehmen 
Weiter, soweit dies zur Lieferung bestellter Waren erforderlich ist. Je 
nach dem, welchen Zahlungsdienstleister Sie im Bestellprozess auswählen,
 geben wir zur Abwicklung von Zahlungen die hierfür erhobenen 
Zahlungsdaten an das mit der Zahlung beauftragte Kreditinstitut und ggf.
 von uns beauftragte Zahlungsdienstleister Weiter bzw. an den 
ausgewählten Zahlungsdienst. Zum Teil erheben die ausgewählten 
Zahlungsdienstleister diese Daten auch selbst, soweit Sie dort ein Konto
 anlegen. In diesem Fall müssen Sie sich im Bestellprozess mit Ihren 
Zugangsdaten bei dem Zahlungsdienstleister anmelden. Es gilt insoweit 
die Datenschutzerklärung des jeweiligen Zahlungsdienstleisters.
<br>
<br>
Wir setzen einen Zahlungsdienstleister ein, der seinen Sitz in einem 
Staat außerhalb der Europäischen Union hat. Die Übermittlung 
personenbezogener Daten an dieses Unternehmen erfolgt lediglich im 
Rahmen der Notwendigkeit zur Vertragserfüllung.
<br>
<br>
4. Cookies
<br>
<br>
Um den Besuch unserer Webseite attraktiv zu gestalten und die Nutzung 
bestimmter Funktionen zu ermöglichen, um passende Produkte anzuzeigen 
oder zur Marktforschung verwenden wir auf verschiedenen Seiten 
sogenannte Cookies, soweit Sie hierzu Ihre Einwilligung nach Art. 6 Abs.
 1 S. 1 lit. a DSGVO erteilt haben.
<br>
<br>
Cookies sind kleine Textdateien, die automatisch auf Ihrem Endgerät 
gespeichert werden. Einige der von uns verwendeten Cookies werden nach 
Ende der Browser-Sitzung, also nach Schließen Ihres Browsers, wieder 
gelöscht (sog. Sitzungs-Cookies). Andere Cookies verbleiben auf Ihrem 
Endgerät und ermöglichen uns, Ihren Browser beim nächsten Besuch 
wiederzuerkennen (persistente Cookies). Die Dauer der Speicherung können
 Sie der Übersicht in den Cookie-Einstellungen Ihres Webbrowsers 
entnehmen. Sie können Ihren Browser so einstellen, dass Sie über das 
Setzen von Cookies informiert werden und einzeln über deren Annahme 
entscheiden oder die Annahme von Cookies für bestimmte Fälle oder 
generell ausschließen. Bei der Nichtannahme von Cookies kann die 
Funktionalität unserer Webseite eingeschränkt sein. Jeder Browser 
unterscheidet sich in der Art, wie er die Cookie-Einstellungen 
verwaltet. Diese ist in dem Hilfemenü jedes Browsers beschrieben, 
welches Ihnen erläutert, wie Sie Ihre Cookie-Einstellungen ändern 
können. Diese finden Sie für die jeweiligen Browser unter den folgenden 
Links:
<br>
<br>
Microsoft Edge™ 
[https://support.microsoft.com/de-de/help/4027947/microsoft-edge-delete-cookies]
 / Safari™ 
[https://support.apple.com/de-de/guide/safari/sfri11471/12.0/mac/10.14 ]
 / Chrome™ 
[https://support.google.com/chrome/answer/95647?hl=de&hlrm=en] / 
Firefox™ 
[https://support.mozilla.org/de/products/firefox/protect-your-privacy/cookies]
 / Opera™ [https://help.opera.com/de/latest/web-preferences/#cookies]
<br>
<br>
Darüber hinaus können Sie Ihre Einwilligung jederzeit durch eine 
Nachricht an die in der Datenschutzerklärung beschriebene 
Kontaktmöglichkeit widerrufen.
<br>
<br>
5. Online-Marketing
<br>
<br>
Google Fonts
Auf dieser Webseite ist der Script Code „Google Fonts“ eingebunden. 
Google Fonts ist ein Angebot der Google Ireland Limited, einer nach 
irischem Recht eingetragenen und betriebenen Gesellschaft mit Sitz in 
Gordon House, Barrow Street, Dublin 4, Irland. (www.google.de 
[http://www.google.de]). Dies dient der Wahrung unserer im Rahmen einer 
Interessensabwägung überwiegenden berechtigten Interessen an einer 
einheitlichen Darstellung der Inhalte auf unserer Webseite gemäß Art. 6 
Abs. 1 lit. f) DSGVO. In diesem Rahmen wird eine Verbindung zwischen dem
 von Ihnen verwendeten Browser und den Servern von Google hergestellt. 
Hierdurch erlangt Google Kenntnis darüber, dass über Ihre IP-Adresse 
unsere Webseite aufgerufen wurde.
Soweit Informationen auf Server von Google in den USA übertragen und 
dort gespeichert werden, ist die amerikanische Gesellschaft Google LLC 
unter dem EU-US-Privacy Shield zertifiziert. Ein aktuelles Zertifikat 
kann hier [https://www.privacyshield.gov/list] eingesehen werden. 
Aufgrund dieses Abkommens zwischen den USA und der Europäischen 
Kommission hat letztere für unter dem Privacy Shield zertifizierte 
Unternehmen ein angemessenes Datenschutzniveau festgestellt. 
Weitergehende Informationen über die Datenverarbeitung durch Google 
finden Sie in den Datenschutzhinweisen 
[https://policies.google.com/privacy] von Google.
<br>
<br>
6. Social Media
<br>
<br>
Unsere Onlinepräsenz auf Facebook
<br>
<br>
Unsere Präsenz auf sozialen Netzwerken und Plattformen dient einer 
besseren, aktiven Kommunikation mit unseren Kunden und Interessenten. 
Wir informieren dort über unsere Produkte und laufende Sonderaktionen.
Bei dem Besuch unserer Onlinepräsenzen in sozialen Medien können Ihre 
Daten für Marktforschungs- und Werbezwecke automatisch erhoben und 
gespeichert werden. Aus diesen Daten werden unter Verwendung von 
Pseudonymen sog. Nutzungsprofile erstellt. Diese können verwendet 
werden, um z.B. Werbeanzeigen innerhalb und außerhalb der Plattformen zu
 schalten, die mutmaßlich Ihren Interessen entsprechen. Zu diesem Zweck 
werden im Regelfall Cookies auf Ihrem Endgerät eingesetzt. In diesen 
Cookies werden das Besucherverhalten und die Interessen der Nutzer 
gespeichert. Dies dient gem. Art. 6 Abs. 1 lit. f. DSGVO der Wahrung 
unserer im Rahmen einer Interessensabwägung überwiegenden berechtigten 
Interessen an einer optimierten Darstellung unseres Angebots und 
effektiver Kommunikation mit den Kunden und Interessenten. Falls Sie von
 den jeweiligen Social-Media Plattformbetreibern um eine Einwilligung 
(Einverständnis) in die Datenverarbeitung gebeten werden, z.B. mit Hilfe
 einer Checkbox, ist die Rechtsgrundlage der Datenverarbeitung Art. 6 
Abs. 1 lit. a DSGVO.
Soweit die vorgenannten Social-Media Plattformen ihren Hauptsitz in den 
USA haben, gilt Folgendes: Für die USA liegt ein 
Angemessenheitsbeschluss der Europäischen Kommission vor. Dieser geht 
Zurück auf den EU-US Privacy Shield. Ein aktuelles Zertifikat für das 
jeweilige Unternehmen kann hier [https://www.privacyshield.gov/list] 
eingesehen werden.
Die detaillierten Informationen zur Verarbeitung und Nutzung der Daten 
durch die Anbieter auf deren Seiten sowie eine Kontaktmöglichkeit und 
Ihre diesbezüglichen Rechte und Einstellungsmöglichkeiten zum Schutz 
Ihrer Privatsphäre, insbesondere Widerspruchsmöglichkeiten (Opt-Out), 
entnehmen Sie bitte den unten verlinkten Datenschutzhinweisen der 
Anbieter. Sollten Sie diesbezüglich dennoch Hilfe benötigen, können Sie 
sich an uns wenden.
<br>
<br>
Facebook: https://www.facebook.com/about/privacy/ 
[https://www.facebook.com/about/privacy]
Die Datenverarbeitung erfolgt auf Grundlage einer Vereinbarung zwischen 
gemeinsam Verantwortlichen gemäß Art. 26 DSGVO, die Sie hier 
[https://www.facebook.com/legal/terms/page_controller_addendum] einsehen
 können.
Weitere Informationen zur Datenverarbeitung im Rahmen des Besuchs einer 
Facebook Fanpage (Informationen zu Insights-Daten) finden Sie hier 
[https://www.facebook.com/legal/terms/information_about_page_insights_data].
<br>
<br>
Widerspruchsmöglichkeit
 (Opt-Out):
<br>
<br>
Facebook: https://www.facebook.com/settings?tab=ads 
[https://www.facebook.com/settings?tab=ads]
<br>
<br>
7. Kontaktmöglichkeiten und Ihre Rechte
<br>
<br>
Als Betroffener haben Sie folgende Rechte:
<br>
<br>
* gemäß Art. 15 DSGVO das Recht, in dem dort bezeichneten Umfang 
Auskunft über Ihre von uns verarbeiteten personenbezogenen Daten zu 
verlangen;
* gemäß Art. 16 DSGVO das Recht, unverzüglich die Berichtigung 
unrichtiger oder Vervollständigung Ihrer bei uns gespeicherten 
personenbezogenen Daten zu verlangen;
* gemäß Art. 17 DSGVO das Recht, die Löschung Ihrer bei uns 
gespeicherten personenbezogenen Daten zu verlangen, soweit nicht die 
Weitere Verarbeitung * zur Ausübung des Rechts auf freie 
Meinungsäußerung und Information;
* zur Erfüllung einer rechtlichen Verpflichtung;
* aus Gründen des öffentlichen Interesses oder
* zur Geltendmachung, Ausübung oder Verteidigung von Rechtsansprüchen 
erforderlich ist;
<br>
<br>
* gemäß Art. 18 DSGVO das Recht, die Einschränkung der Verarbeitung 
Ihrer personenbezogenen Daten zu verlangen, soweit * die Richtigkeit der
 Daten von Ihnen bestritten wird;
* die Verarbeitung unrechtmäßig ist, Sie aber deren Löschung ablehnen;
* wir die Daten nicht mehr benötigen, Sie diese jedoch zur 
Geltendmachung, Ausübung oder Verteidigung von Rechtsansprüchen 
benötigen oder
* Sie gemäß Art. 21 DSGVO Widerspruch gegen die Verarbeitung eingelegt 
haben;
<br>
<br>
* gemäß Art. 20 DSGVO das Recht, Ihre personenbezogenen Daten, die Sie 
uns bereitgestellt haben, in einem strukturierten, gängigen und 
maschinenlesebaren Format zu erhalten oder die Übermittlung an einen 
anderen Verantwortlichen zu verlangen;
* gemäß Art. 77 DSGVO das Recht, sich bei einer Aufsichtsbehörde zu 
beschweren. In der Regel können Sie sich hierfür an die Aufsichtsbehörde
 Ihres üblichen Aufenthaltsortes oder Arbeitsplatzes oder unseres 
Unternehmenssitzes wenden.
<br>
<br>
Bei Fragen zur Erhebung, Verarbeitung oder Nutzung Ihrer 
personenbezogenen Daten, bei Auskünften, Berichtigung, Einschränkung 
oder Löschung von Daten sowie Widerruf erteilter Einwilligungen oder 
Widerspruch gegen eine bestimmte Datenverwendung wenden Sie sich bitte 
direkt an uns über die Kontaktdaten in unserem Impressum.
<br>
<br>
Widerspruchsrecht
Soweit wir zur Wahrung unserer im Rahmen einer Interessensabwägung 
überwiegenden berechtigten Interessen personenbezogene Daten wie oben 
erläutert verarbeiten, können Sie dieser Verarbeitung mit Wirkung für 
die Zukunft widersprechen. Erfolgt die Verarbeitung zu Zwecken des 
Direktmarketings, können Sie dieses Recht jederzeit wie oben beschrieben
 ausüben. Soweit die Verarbeitung zu anderen Zwecken erfolgt, steht 
Ihnen ein Widerspruchsrecht nur bei Vorliegen von Gründen, die sich aus 
Ihrer besonderen Situation ergeben, zu.
<br>
<br>
Nach Ausübung Ihres Widerspruchsrechts werden wir Ihre personenbezogenen
 Daten nicht Weiter zu diesen Zwecken verarbeiten, es sei denn, wir 
können zwingende schutzwürdige Gründe für die Verarbeitung nachweisen, 
die Ihre Interessen, Rechte und Freiheiten überwiegen, oder wenn die 
Verarbeitung der Geltendmachung, Ausübung oder Verteidigung von 
Rechtsansprüchen dient
<br>
<br>
Dies gilt nicht, wenn die Verarbeitung zu Zwecken des Direktmarketings 
erfolgt. Dann werden wir Ihre personenbezogenen Daten nicht Weiter zu 
diesem Zweck verarbeiten.
</h2>
</div>

<div class="btn-group">

<<button "Zurück">>
	    <<goto "map.init">>
	<<audio "click" play>>
<</button>>	

</div>


:: Inventar {"position":"200,600","size":"100,100"}
<div class="wrapper">
  <h1>Geister</h1>
  <h2>Hier werden alle Geister angezeigt, die ihr mit der Spektralkamera eingefangen habt.</h2>
  <<if $affe is 1>>
    <model-viewer id="model-viewer" src="models/witch/witch.glb" ar auto-rotate poster="models/witch/poster.webp" 
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a witch with graveyard" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
    </model-viewer>
  <</if>>
  <<if $flamingo is 1>>
      <model-viewer id="model-viewer" src="models/hanging/hanging.glb" ar auto-rotate poster="models/hanging/poster.webp" 
        autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
        alt="A 3D model of a hanging scene" camera-controls>
        <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
      </model-viewer>
  <</if>>

  <<if $eule is 1>>
    <model-viewer id="model-viewer" src="models/setup.3/setup.3.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/setup.3/setup.3.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a zombie" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $pferd is 1>>
    <model-viewer id="model-viewer" src="models/setup.3/setup.3.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/setup.3/setup.3.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $zebra is 1>>
    <model-viewer id="model-viewer" src="models/zebra/zebra.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/zebra/zebra.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $schildkröte is 1>>
    <model-viewer id="model-viewer" src="models/schildkroete/schildkroete.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/schildkroete/schildkroete.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $schlange is 1>>
    <model-viewer id="model-viewer" src="models/schlange/schlange.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/schlange/schlange.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $ozelot is 1>>
    <model-viewer id="model-viewer" src="models/ozelot/ozelot.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/ozelot/ozelot.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $truthahn is 1>>
    <model-viewer id="model-viewer" src="models/truthahn/truthahn.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/truthahn/truthahn.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $katze is 1>>
    <model-viewer id="model-viewer" src="models/katze/katze.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/katze/katze.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $schwein is 1>>
    <model-viewer id="model-viewer" src="models/schwein/schwein.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/schwein/schwein.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $krokodil is 1>>
    <model-viewer id="model-viewer" src="models/krokodil/krokodil.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/krokodil/krokodil.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $lama is 1>>
    <model-viewer id="model-viewer" src="models/lama/lama.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/lama/lama.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  <<if $gazelle is 1>>
    <model-viewer id="model-viewer" src="models/gazelle/gazelle.glb" ar auto-rotate poster="images/loading.png"
                ios-src="models/gazelle/gazelle.usdz"
      autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
      alt="A 3D model of a" camera-controls>
      <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
  <</if>>

  </div>

  <div class="btn-group">
    <<button "Zurück" `previous()`>>
      <<audio "click" play>>
    <</button>>
  </div>
</div>


:: StoryCaption {"position":"800,200","size":"100,100"}
<h1>Menu</h1>
  <h5>Punkte:</h5>
  <h3>$koinz/210</h3>
  <h5>Gefundene Symbole:</h5>
  <p class="p1">
    <<if $letter1 is 1>>
      R
    <<else>>
    _
    <</if>>
    <<if $letter2 is 1>>
      O
    <<else>>
    _
    <</if>>
    <<if $letter3 is 1>>
      S
    <<else>>
    _
    <</if>>
    <<if $letter4 is 1>>
      A
    <<else>>
    _
    <</if>>
    <<if $letter5 is 1>>
      L
    <<else>>
    _
    <</if>>
    <<if $letter6 is 1>>
      I
    <<else>>
    _
    <</if>>
    <<if $letter7 is 1>>
      E
    <<else>>
    _
    <</if>>
  </p>


:: StoryHeader {"position":"600,200","size":"100,100"}



:: StoryInit {"position":"400,200","size":"100,100"}
-------------------------SETUP-------------------------------

<<set $is_pwa to window.matchMedia('(display-mode: window-controls-overlay)').matches || window.matchMedia('(display-mode: fullscreen)').matches>>
<<set
 $is_safari to navigator.userAgent.indexOf('Safari') > -1 && 
navigator.userAgent.indexOf('Chrome') <= -1 && navigator.userAgent.indexOf("Edg") <= -1 &&
navigator.userAgent.indexOf('SamsungBrowser') <= - 1>>
<<set $is_chrome to navigator.userAgent.indexOf('Chrome') > 
-1 && navigator.userAgent.indexOf("Edg") <= -1 &&
navigator.userAgent.indexOf('SamsungBrowser') <= - 1>>

-------------------------LANGUAGE-------------------------------
<<widget "txt">>
	<<if ndef _txtCount>>
		<<set _txtCount = 0>>
	<</if>>
	<<if $args.raw === "">>
		<<set _txtOutput = setup.text[passage()][++_txtCount][setup.i18n.langs[settings.lang]]>>
		<<if def _txtOutput>>
			_txtOutput
		<<else>>
			<<= setup.text[passage()][_txtCount]["de"]>>
		<</if>>
	<<else>>
		<<set _txtOutput = setup.text[passage()][$args.raw][setup.i18n.langs[settings.lang]]>>
		<<if def _txtOutput>>
			_txtOutput
		<<else>>
			<<= setup.text[passage()][$args.raw]["de"]>>
		<</if>>
	<</if>>
<</widget>>

--------------------------AUDIO---------------------------------------

<<cacheaudio "bg" "audio/bg.mp3">>

<<cacheaudio "click" "audio/click.mp3">>

<<cacheaudio "ring" "audio/ring.mp3">>

-------------------------MAPBOX-------------------------------

<<set $fences to setup.storyinit()>>
<<set $accessToken to 'pk.eyJ1IjoiZ3JlZ2dlciIsImEiOiJjaXl1N3picTcwMDZkMzJyczB4Y3MxMGVxIn0.voeDl_IRyEmggYlnYhDXoQ'>>
<<set $style to 'mapbox://styles/gregger/cjpkxg68s0fb22sqnjhzm8vvb'>>

-------------------------STARTVARIABLEN-------------------------------

<<set $letter1 to 0>>
<<set $letter2 to 0>>
<<set $letter3 to 0>>
<<set $letter4 to 0>>
<<set $letter5 to 0>>
<<set $letter6 to 0>>
<<set $letter7 to 0>>

<<set $maptip to 0>>

<<set $koinz to 0>>

<<set $riddle to 1>>

<<set $ende to 0>>

<<set $flamingo to 0>>

<<set $affe to 0>>

<<set $eule to 1>>

<<set $krokodil to 0>>

<<set $zebra to 0>>

<<set $pferd to 0>>

<<set $gazelle to 0>>

<<set $schlange to 0>>

<<set $schildkroete to 0>>

<<set $katze to 0>>

<<set $ozelot to 0>>

<<set $schwein to 0>>

<<set $lama to 0>>

<<set $truthahn to 0>>


:: StoryMenu {"position":"198,200","size":"100,100"}
<<set $inventory = setup.text['StoryMenu'][1][setup.i18n.langs[settings.lang]]>>
<<set $help = setup.text['StoryMenu'][2][setup.i18n.langs[settings.lang]]>>
<<set $legal = setup.text['StoryMenu'][3][setup.i18n.langs[settings.lang]]>>
<<link [[$inventory|"Inventar"]]>><<addclass "#ui-bar" "stowed">><</link>>
/* <<link [[$help|"Hilfe"]]>><<addclass "#ui-bar" "stowed">><</link>> */
/* <<link [[$legal|"Impressum"]]>><<addclass "#ui-bar" "stowed">><</link>> */
<<link "Dev">>
	<<addclass "#ui-bar" "stowed">>
	<<goto "Dev">>
<</link>>


:: anruf {"position":"800,800","size":"100,100"}

  <script>
    $('#story').attr('style', 'background-image:url(images/holger.bg.jpg)');
  </script>

  <<audio "ring" loop play>>

  <div class="wrapper">
    <h1>Anruf</h1>
    <img src="images/holger.png" class="image1" />
  </div>

  <div class="btn-group">
    <<button "Annehmen">>
      <<goto "holger">>
      <<audio "click" play>>	
    <</button>>
  </div>

:: ar.init {"position":"1500,1000","size":"100,100"}



:: dauer {"position":"375,3600","size":"100,100"}
<div
 class="wrapper">

<h1>Länge</h1>
<h2>Die Rallye besteht aus zwei Teilen. Die kurze Quiz-Runde 
dauert ungefähr eine Stunde. Lauft hierfür alle Quiz-Stationen ab, um 
das Haupträtsel zu lösen. 
<br>
<br>
Danach könnt ihr noch alle Tiere einsammeln, die ihr noch nicht gefunden
 habt. Das dauert ungefähr nochmal eine Stunde. 
</h2>
</div>

<div class="btn-group">
	<<button "Weiter">>
    	<<goto "menu">>	
<<audio "click" play>>	
<</button>>
</div>


:: disclaimer {"position":"700,3000","size":"100,100"}
<<audio "bg" play loop>>
<div class="wrapper">
<h1>Vorwort</h1>
<h2>Dies ist eine interaktive Schnitzeljagd für den alleinigen Zweck der Unterhaltung. 
<br>
<br>
Die Schnitzeljagd findet im öffentlichen Raum statt. Bitte nimm Rücksicht auf deine Mitmenschen und achte auf den Verkehr.
</h2>
</div>

<div class="btn-group">
	<<button "Weiter">>
    	<<goto "spiel">>	
<<audio "click" play>>	
<</button>>
</div>


:: friedenspark {"position":"500,3200","size":"100,100"}
<video
 autoplay loop id="myVideo" playsinline>
  <source src="videos/demo.mp4" type="video/mp4">
</video>

<div class="wrapper">
	<h1>Friedenspark</h1>
    <h2>Großartig. Dann können wir starten.
	<br>
	<br>Ich schicke euch gleich die Koordinaten vom Friedenspark. Da 
müsst ihr hin.
	<br>
	<br>Ich schätze wir brauchen dort so ein bis zwei Stunden. Also 
stellt sicher, dass eure Handys voll geladen sind und nehmt was zu essen
 und trinken mit. 
	<br>
	<br>Ihr könnt starten wann immer ihr bereit seid. Heute, morgen, 
übermorgen. Das dürft ihr selbst entscheiden. Ich empfehle euch aber in 
der Abenddämmerung zu gehen. Da sind die Spukis am aktivsten.
	</h2>
</div>

<div class="btn-group">
	<<button "Zurück">>
    	<<goto "AR">>	
<<audio "click" play>>	
<</button>>
	<<button "Ok">>
    	<<goto "gps">>	
<<audio "click" play>>	
<</button>>
</div>


:: gps {"position":"500,3400","size":"100,100"}
<video
 autoplay loop id="myVideo" playsinline>
  <source src="videos/demo.mp4" type="video/mp4">
</video>

<<set
 $is_safari to navigator.userAgent.indexOf('Safari') > -1 && 
navigator.userAgent.indexOf('Chrome') <= -1>>
<<set $is_chrome to navigator.userAgent.indexOf('Chrome') > 
-1>>

<div class="wrapper">
	<h1>GPS</h1>
    <h2>Um euch die Koordinaten zu schicken, braucht ihr zwingend 
GPS. Ohne geht's nicht! Stellt sicher, dass ihr das aktiviert habt und 
euer Browser die Erlaubnis hat es zu nutzen. 
    <br>
    <br>
    <<if $is_safari>>
    Ihr findet das bei "Einstellungen" und dann "Ortungsdienste". 
Erlaubt Safari "Beim Verwenden der App" euren Standort zu benutzen.

    <<elseif $is_chrome>>
    Ihr findet das bei "Einstellungen" und dann "Standort". Erlaubt 
Chrome "Beim Verwenden der App" euren Standort zu benutzen.
    
    <<else>>
    Bitte benutze entweder Chrome oder Safari Browser.
    <</if>>
	<br>
	<br>
    </h2>
</div>

<div class="btn-group">
	<<button "Weiter">>
    	<<goto "map.init">>	
<<audio "click" play>>	
<</button>>
</div>


:: holger {"position":"800,1000","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

<<audio ":playing:" stop>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/holger.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <button class="return">[[|anruf]]<<audio "click" play>></button>
    <button class="retry">[[|holger]]<<audio "click" play>></button>
    <button class="next">[[|rallye]]<<audio "click" play>></button>
  </div>


:: hotspot.1.init {"position":"1500,800","size":"100,100"}



:: hotspot.3.init {"position":"1500,1200","size":"100,100"}



:: installation {"position":"600,600","size":"100,100"}
<<script>>
  if (State.variables.is_pwa) {
    $.wiki('<<goto "intro">>')
  };

  $('#story').attr('style', 'background-image:url(images/kapitel.jpg)');

  window.addEventListener('beforeinstallprompt', (event) => {
    /* Prevent the mini-infobar from appearing on mobile. */
    event.preventDefault();
    console.log('👍', 'beforeinstallprompt', event);
    /* Stash the event so it can be triggered later. */
    window.deferredPrompt = event;
  });
<</script>>

<div class="wrapper">
<h2><<txt>></h2>
  <h1>Spuk &
  <br>Schreck</h1>
  <h2><<txt>></h2>
  <p class="p3">spui</p>
</div>

<div class="btn-group">
  <button class="next">[[|vorstellung]]</button>
</div>


:: intro {"position":"800,600","size":"100,100"}
<script>
  $('#story').attr('style', 'background-image:url(images/kapitel.jpg)');
</script>

<div class="wrapper">
<br>
<br>
<br>
  <h1>Einführung</h1>
  <h2>Ablauf, Dauer & Teams.</h2>
  <p class="p3">intro</p>
</div>

  <div class="btn-group">
    <<button "Start">>
      <<goto "anruf">>
      <<audio "click" play>>	
    <</button>>
  </div>


:: kapitel.1 {"position":"1000,600","size":"100,100"}
<script>
  $('#story').attr('style', 'background-image:url(images/kapitel.jpg)');
</script>

<div class="wrapper">
<br>
<br>
<br>
  <h1>Kapitel 1</h1>
  <h2>Paranormale Aktivitäten</h2>
  <p class="p3">apitel</p>
</div>

  <div class="btn-group">
    <<button "Weiter">>
      <<goto "map.init">>
      <<audio "click" play>>	
    <</button>>
  </div>


:: map.init {"position":"1400,600","size":"100,100"}
<<if $letter1 is 1 and $letter2 is 1 and $letter3 is 1 and $letter4 is 1 and $letter5 is 1 and $letter6 is 1 and $letter7 is 1 and $ende is 0>>
	<<goto "ende.1">>
<<else>>
	<<goto "mapbox">>
<</if>>


:: mapbox [autosave] {"position":"1500,600","size":"100,100"}
<div id="map"></div>

<<script>>
  $(document).one(":passagedisplay", function() {
    setup.mapboxLoaded.then(function () {
      mapboxgl.accessToken = State.variables.accessToken;

      const map = new mapboxgl.Map({
        container: 'map',
          style: State.variables.style,
      });

      const geolocate = new mapboxgl.GeolocateControl(window.geolocation.getGeolocateControl());

      map.addControl(geolocate);

      const remainingFences = State.variables.fences.filter(f => f.alreadyEntered === false);

      geolocate.on('geolocate', ({ coords }) => {
        const lat = coords.latitude;
        const lon = coords.longitude;

        for (const fence of remainingFences) {
          if (window.geolocation.inside(fence.latitude,fence.longitude,fence.radius,lat, lon)) {
            map.setPaintProperty(fence.id, 'fill-color', 'green');

            /* Hier die entsprechenden Passagen einfügen */
            map.on('click', fence.id, (e) => {
              State.variables.fences.find(f => f.id === fence.id).alreadyEntered = true;          
              switch (fence.id) {
                case 'johannistorturm':
                  $.wiki('<<goto "1.1">>');
                  break;
                case 'marsfeld':
                  $.wiki('<<goto "2.1">>');
                  break;
                case 'grauer_hof':
                  $.wiki('<<goto "3.1">>');
                  break;
                case 'markt':
                  $.wiki('<<goto "4.1">>');
                  break;
                case 'holzmarkt':
                  $.wiki('<<goto "5.1">>');
                  break;
                case 'halken':
                  $.wiki('<<goto "6.1">>');
                  break;
                case 'rabenturm':
                  $.wiki('<<goto "7.1">>');
                  break;
                case 'ozelot':
                  $.wiki('<<goto "8.1">>');
                  break;
                case 'pferd':
                  $.wiki('<<goto "9.1">>');
                  break;
                case 'schildkröte':
                  $.wiki('<<goto "10.1">>');
                  break;
                case 'schlange':
                  $.wiki('<<goto "11.1">>');
                  break;
                case 'schwein':
                  $.wiki('<<goto "12.1">>');
                  break;
                case 'truthahn':
                  $.wiki('<<goto "13.1">>');
                  break;
                case 'zebra':
                  $.wiki('<<goto "14.1">>');
                  break;
                case 'affe':
                  $.wiki('<<goto "15.1">>');
                  break;
                case 'eule':
                  $.wiki('<<goto "16.1">>');
                  break;
                case 'gazelle':
                  $.wiki('<<goto "17.1">>');
                  break;
                case 'katze':
                  $.wiki('<<goto "18.1">>');
                  break;
                case 'krokodil':
                  $.wiki('<<goto "19.1">>');
                  break;
                case 'lama':
                  $.wiki('<<goto "20.1">>');
                  break;
                default:
                  console.log(`${fence.id} not found`);
              }
            });

          } else {
            map.setPaintProperty(fence.id, 'fill-color', 'red');
          }
        }
      });

      /* Beim Laden der Karte wird der Geolocate Button automatisch geklickt. Dadurch muss der User nicht immer manuell klicken.*/
      map.on('load', () => {
        renderMap();
        $(".mapboxgl-ctrl-geolocate").click();
      });

      function renderMap() {
        map.resize();
        for (const fence of remainingFences) {
          map.addSource(fence.id, window.geolocation.createGeoJSONCircle([fence.longitude, fence.latitude], fence.radius / 1000));

          map.addLayer({
            'id': fence.id,
            'type': 'fill',
            'source': fence.id,
            'layout': {},
            'paint': {
              'fill-color': 'red',
              'fill-opacity': 0.6
            }
          });
        }
      };
    })
  });
<</script>>

<div class="wrapper" style="z-index: unset"></div>

<div class="btn-group">
  
    <<if $maptip is 0>> 
      <span id="heading"><h2>Diese Karte ist euer Hauptbildschirm.</h2>
        <<button "Weiter">>
          <<replace "#heading">>
            <h2>Hier seht ihr alle Tatorte in eurer Umgebung.</h2>
            <<button "Weiter">>
              <<replace "#heading">>
                <h2>Lauft in einen der roten Kreise hinein! Sobald er grün wird, könnt ihr den Tatort anklicken.</h2>
              <</replace>>
              <<audio "click" play>>
              <<goto "1.0">>	
            <</button>>
          <</replace>>
          <<audio "click" play>><<set $maptip to 1>>
        <</button>>
      </span>
    <</if>>
  
</div>


:: menu {"position":"500,3600","size":"100,100"}
<div class="wrapper">
    <h1>Seitenmenü</h1>
    <h2>
    Über den Pfeil oben links öffnet Ihr das Seitenmenü.
    <br>
    <br>
    Dort findet Ihr euren Punktestand und alle bereits gesammelten Buchstaben für das Lösungswort.
    <br>
    <br>
    Ihr könnt das Spiel hier auch speichern oder neu starten. 
    </h2>
  </div>
  <div class="btn-group">
    <<button "Weiter">>
      <<goto "title">>
      <<audio "click" play>>	
    <</button>>
  </div>


:: multiplayer {"position":"800,1400","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

<<audio ":playing:" stop>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/mehrspieler.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <<button "1">>
      <<goto "start">>	
      <<audio "click" play>>	
    <</button>>
    <<button "2">>
      <<goto "start">>	
      <<audio "click" play>>	
    <</button>>
    <<button "3">>
      <<goto "start">>	
      <<audio "click" play>>	
    <</button>>
        <<button "3+">>
      <<goto "teams">>	
      <<audio "click" play>>	
    <</button>>
  </div>


:: musik {"position":"700,2800","size":"100,100"}
<div class="wrapper">
<h1>Musik</h1>
<h2>Wir spielen Musik. Du kannst die Lautstärke über dein Telefon regulieren.</h2>
</div>

<div class="btn-group">
	<<button "Ok">>
    	<<goto "disclaimer">>	
<<audio "click" play>>	
<</button>>
</div>


:: quiz.init {"position":"1500,1400","size":"100,100"}



:: rallye {"position":"800,1200","size":"100,100"}
<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

<<audio ":playing:" stop>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/rallye.mp4" type="video/mp4">
  </video>

  <div class="wrapper">
  </div>

  <div class="btn-group">
    <button class="return">[[|holger]]<<audio "click" play>></button>
    <button class="retry">[[|rallye]]<<audio "click" play>></button>
    <button class="next">[[|multiplayer]]<<audio "click" play>></button>
  </div>


:: reward.init {"position":"1500,1600","size":"100,100"}



:: setup.1 {"position":"600,1000","size":"100,100"}
<<script>>
  $('#story').attr('style', 'background-image:url(images/kapitel.jpg)');
<</script>>
<div class="wrapper">
  <h4>Setup 1/4</h4>
  <h1>Browser Check</h1>
  <h2>
    <<if State.variables.is_safari>>
      Du benutzt Safari. Wunderbar! 
    <<elseif State.variables.is_chrome>>
      Du benutzt Chrome. Wunderbar! 
    <<else>>
      Bitte benutze entweder den Chrome Browser (Android) oder Safari (iOS) um diesen Link zu öffnen. 
    <</if>>
  </h2>
</div>

<div class="btn-group">
  <<if State.variables.is_safari or State.variables.is_chrome>>
    <button class="next">[[|setup.2]]</button>
  <</if>>
</div>


:: setup.2 {"position":"600,1200","size":"100,100"}
<<script>>
$(document).one(":passagedisplay", function() {

  setup.mapboxLoaded.then(function () {
    mapboxgl.accessToken = State.variables.accessToken;

    const map = new mapboxgl.Map({
      container: 'map',
      style: State.variables.style
    });

    const geolocate = new mapboxgl.GeolocateControl(window.geolocation.getGeolocateControl());
    map.addControl(geolocate);
    map.resize();
  });

  const geolocationBtn = document.querySelector('.geolocation');
  const settingsBtn = document.querySelector('.settings');
  const helpBtn = document.querySelector('.help');
  const nextBtn = document.querySelector('.next');
  settingsBtn.style.display = 'none';
  helpBtn.style.display = 'none';
  nextBtn.style.display = 'none';

  /* Create success callback to store values */
  const positionSuccess = function(pos) {
    console.log('👍', 'Geolocation prompt successful', pos.coords);
    $(".mapboxgl-ctrl-geolocate").click();
    geolocationBtn.style.display = 'none';
    nextBtn.style.display = 'inline';
  };

  /* Create error callback */
  const positionError = function(error) {
    alert('Bitte gib deinen Standort in den Systemeinstellungen frei');
    if (State.variables.is_safari) {
      settingsBtn.style.display = 'inline';
    }
    helpBtn.style.display = 'inline';
  };

  /* Create initial options */
  const positionOptions = {
    enableHighAccuracy: false,
    maximumAge: 30000,
    timeout: 20000
  };

  function askGeolocationPermission() {
    navigator.permissions.query({name:'geolocation'}).then(function(result) {
      if (result.state == 'granted') {
        console.log('👍', 'Geolocation permission granted');
        $(".mapboxgl-ctrl-geolocate").click();
        geolocationBtn.style.display = 'none';
        nextBtn.style.display = 'inline';
      } else if (result.state == 'prompt') {
        /* Ask for location based on callbacks and options */
        navigator.geolocation.getCurrentPosition(positionSuccess, positionError, positionOptions);
      } else if (result.state == 'denied') {
        helpBtn.style.display = 'inline';
      }
    });
  };

  geolocationBtn.onclick = function() {
    if(window.geolocation.available()) {
      askGeolocationPermission();
    }
  };
});
<</script>>
<div id="map"></div>

<div class="wrapper">
  <h4>Setup 2/4</h4>
  <h1>GPS</h1>
  <h2>Wir benötigen deinen Standort, um dich zu den Geister-Hotspots zu leiten.</h2>
</div>

<div class="btn-group">
  <button class="geolocation">Standort freigeben</button>
  <button class="settings"><a href="x-apple.systempreferences:com.apple.preference.security?Privacy_LocationServices">Einstellungen öffnen</a></button>
  <button class="help"></button>
  <button class="next">[[|setup.3]]</button>
</div>


:: setup.3 {"position":"600,1400","size":"100,100"}
<<script>>
  $(document).one(":passagedisplay", function() {
    $('#story').attr('style', 'background-image:url(images/cam.jpg)');

    document.querySelector("#model-viewer").addEventListener('ar-status', (event) => {
      console.log(event.detail.status)
    });
  });
<</script>>
<div class="wrapper">
<h4>Setup 3/4</h4>
<h1>Kamera</h1>
  <h2>Wir benötigen Zugriff auf deine Kamera, um dir die Geister in der realen Welt zu zeigen. 
  <br>
  <br>Klicke auf "Spektralkamera aktivieren" und schau dir den Zombie an.
  </h2>
  <model-viewer id="model-viewer" src="models/setup.3/setup.3.glb" ar auto-rotate poster="models/setup.3/poster.webp" 
    autoplay environment-image="models/hanging/music_hall_01_1k.hdr"
    alt="A 3D model of a zombie" camera-controls>
    <button slot="ar-button" id="ar-button">Spektralkamera aktivieren</button>
  </model-viewer>
</div>

<div class="btn-group">
  <button class="help"></button>
  <button class="next">[[|setup.4]]</button>
</div>


:: setup.4 {"position":"600,1600","size":"100,100"}
<<script>>
$(document).one(":passagedisplay", function() {
  $('#story').attr('style', 'background-image:url(images/kapitel.jpg)');
  const installBtn = document.querySelector('.install');
  const openBtn = document.querySelector('.open');
  const nextBtn = document.querySelector('.next');
  openBtn.style.display = 'none';

  installBtn.addEventListener('click', async () => {
    console.log('👍', 'installBtn-clicked');
    const promptEvent = window.deferredPrompt;
    if (!promptEvent) {
      /* The deferred prompt isn't available. */
      return;
    }
    /* Show the install prompt. */
    promptEvent.prompt();
    /* Log the result */
    const result = await promptEvent.userChoice;
    console.log('👍', 'userChoice', result);
    /* Reset the deferred prompt variable, since */
    /* prompt() can only be called once. */
    window.deferredPrompt = null;
  });

  window.addEventListener('appinstalled', (event) => {
    console.log('👍', 'appinstalled', event);
    /* Clear the deferredPrompt so it can be garbage collected */
    window.deferredPrompt = null;
    installBtn.style.display = 'none';
    openBtn.style.display = 'inline';
    nextBtn.style.display = 'none';
  });
 });
<</script>>
<div class="wrapper">
  <h4>Herzlich Willkommen bei:</h4>
  <h1>Spuk & Schreck</h1>
  <h2>Bitte installiere zuerst die App. 
  <br>
  <br>Klicke auf "Teilen" + "Zum Homescreen hinzufügen".
  <br>
  <br>Verlasse den Browser und öffne die neu hinzugefügte App.
  </h2>
  <img src="images/icon.png" class="image1" />
</div>

<div class="btn-group">
  <button class="install"></button>
  <button class="open"><a href='https://digitalwarenkombinat.github.io/ghosthunt/' target='_blank'>App öffnen</a></button>
  <button class="next">[[|intro]]</button>
</div>


:: spiel {"position":"700,3200","size":"100,100"}
<div
 class="wrapper">

<h1>Spiel</h1>
<h2>Ihr könnt den Link zur Rallye auf beliebig vielen Smartphones 
öffnen. So könnt ihr das Spiel entweder gemeinsam spielen, euch in 
kleine Gruppen aufteilen oder jeder allein losziehen. 
<br>
<br>
Ihr könnt auch einen kleinen Wettkampf machen und vergleichen wer am 
Ende die meisten Punkte und Tiere gesammelt hat. 
</h2>
</div>

<div class="btn-group">
	<<button "Weiter">>
    	<<goto "dauer">>	
<<audio "click" play>>	
<</button>>
</div>


:: start {"position":"800,1800","size":"100,100"}
<<audio ":playing:" stop>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/start.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <button class="return">[[|multiplayer]]<<audio "click" play>></button>
    <button class="retry">[[|start]]<<audio "click" play>></button>
    <button class="next">[[|kapitel.1]]<<audio "click" play>></button>
  </div>


:: story.init {"position":"1500,1800","size":"100,100"}



:: teams {"position":"800,1600","size":"100,100"}
<<audio ":playing:" stop>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/teams.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
    <button class="return">[[|multiplayer]]<<audio "click" play>></button>
    <button class="retry">[[|teams]]<<audio "click" play>></button>
    <button class="next">[[|start]]<<audio "click" play>></button>
  </div>

:: vorstellung {"position":"600,800","size":"100,100"}
<<audio ":playing:" stop>>

<<script>>
  window.video.showButtonsOnVideoEnd();
<</script>>

  <video autoplay id="myVideo" playsinline>
    <source src="videos/vorstellung.mp4" type="video/mp4">
  </video>

  <div class="wrapper"></div>

  <div class="btn-group">
  <button class="return">[[|installation]]<<audio "click" play>></button>
  <button class="retry">[[|vorstellung]]<<audio "click" play>></button>
  <button class="next">[[|setup.1]]<<audio "click" play>></button>
  </div>

:: StoryScript [script]
/************
Configuration
************/
Config.saves.autosave = ["autosave"];
Config.passages.nobr = true;

/**************************
Internationalization (i18n) 
**************************/
settings.lang = "Deutsch";
setup.i18n = {
		/* Map of language labels to codes for all supported languages */
		langs : {
			'Deutsch'  : 'de',
			'English'  : 'en',
		},

		/* Utility methods */
		codes : function () {
			return Object.keys(this.langs).map(function (label) {
				return this.langs[label];
			}, this);
		},

		labels : function () {
			return Object.keys(this.langs);
		},

		labelFromCode : function (code) {
			let label = Object.keys(this.langs).find(function (label) {
				return this.langs[label] === code;
			}, this);

			if (!label) {
				throw new Error('unknown language code "' + code + '"');
			}

			return label;
		}
	};

/* Language switching setting */
function initLanguage() {
  switch (setup.i18n.langs[settings.lang]) {
    case 'en':
      l10nStrings.identity="game",l10nStrings.aborting="Aborting",l10nStrings.cancel="Cancel",l10nStrings.close="Close",l10nStrings.ok="OK",l10nStrings.errorTitle="Error",l10nStrings.errorToggle="Toggle the error view",l10nStrings.errorNonexistentPassage='the passage "{passage}" does not exist',l10nStrings.errorSaveDiskLoadFailed="failed to load save file from disk",l10nStrings.errorSaveMissingData="save is missing required data. Either the loaded file is not a save or the save has become corrupted",l10nStrings.errorSaveIdMismatch="save is from the wrong {identity}",l10nStrings._warningIntroLacking="Your browser either lacks or has disabled",l10nStrings._warningOutroDegraded=", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",l10nStrings.warningNoWebStorage="{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",l10nStrings.warningDegraded="{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",l10nStrings.debugBarToggle="Toggle the debug bar",l10nStrings.debugBarNoWatches="— no watches set —",l10nStrings.debugBarAddWatch="Add watch",l10nStrings.debugBarDeleteWatch="Delete watch",l10nStrings.debugBarWatchAll="Watch all",l10nStrings.debugBarWatchNone="Delete all",l10nStrings.debugBarLabelAdd="Add",l10nStrings.debugBarLabelWatch="Watch",l10nStrings.debugBarLabelTurn="Turn",l10nStrings.debugBarLabelViews="Views",l10nStrings.debugBarViewsToggle="Toggle the debug views",l10nStrings.debugBarWatchToggle="Toggle the watch panel",l10nStrings.uiBarToggle="Toggle the UI bar",l10nStrings.uiBarBackward="Go backward within the {identity} history",l10nStrings.uiBarForward="Go forward within the {identity} history",l10nStrings.uiBarJumpto="Jump to a specific point within the {identity} history",l10nStrings.jumptoTitle="Jump To",l10nStrings.jumptoTurn="Turn",l10nStrings.jumptoUnavailable="No jump points currently available…",l10nStrings.savesTitle="Saves",l10nStrings.savesDisallowed="Saving has been disallowed on this passage.",l10nStrings.savesIncapable="{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",l10nStrings.savesLabelAuto="Autosave",l10nStrings.savesLabelDelete="Delete",l10nStrings.savesLabelExport="Save to Disk…",l10nStrings.savesLabelImport="Load from Disk…",l10nStrings.savesLabelLoad="Load",l10nStrings.savesLabelClear="Delete All",l10nStrings.savesLabelSave="Save",l10nStrings.savesLabelSlot="Slot",l10nStrings.savesUnavailable="No save slots found…",l10nStrings.savesUnknownDate="unknown",l10nStrings.settingsTitle="Settings",l10nStrings.settingsOff="Off",l10nStrings.settingsOn="On",l10nStrings.settingsReset="Reset to Defaults",l10nStrings.restartTitle="Restart",l10nStrings.restartPrompt="Are you sure that you want to restart? Unsaved progress will be lost.",l10nStrings.shareTitle="Share",l10nStrings.alertTitle="Alert",l10nStrings.autoloadTitle="Autoload",l10nStrings.autoloadCancel="Go to start",l10nStrings.autoloadOk="Load autosave",l10nStrings.autoloadPrompt="An autosave exists. Load it now or go to the start?",l10nStrings.macroBackText="Back",l10nStrings.macroReturnText="Return";
      break;
    default:
      l10nStrings.identity="spiel",l10nStrings.aborting="Vorzeitig abgebrochen",l10nStrings.cancel="Abbrechen",l10nStrings.close="Schließen",l10nStrings.ok="OK",l10nStrings.errorTitle="Fehler",l10nStrings.errorToggle="Fehleransicht umschalten",l10nStrings.errorNonexistentPassage='die Passage "{passage}" existiert nicht',l10nStrings.errorSaveMissingData="Im Speicherstand fehlen benötigte Daten. Entweder ist die geladene Datei kein Speicherstand oder er ist defekt",l10nStrings.errorSaveIdMismatch="Speicherstand ist vom falschen {identity}",l10nStrings._warningIntroLacking="Dein Browser kann folgendes nicht darstellen, oder es ist deaktiviert",l10nStrings._warningOutroDegraded="; darum läuft dieses {identity} in einem heruntergesetzten Modus. Du kannst zwar fortfahren, aber manche Teile funktionieren vielleicht nicht richtig.",l10nStrings.warningNoWebStorage="{_warningIntroLacking} Das Web Storage API{_warningOutroDegraded}",l10nStrings.warningDegraded="{_warningIntroLacking} Manche Features die für dieses {identity} benötigt werden{_warningOutroDegraded}",l10nStrings.debugBarToggle="Fehlersuche-Leiste umschalten",l10nStrings.debugBarNoWatches="— kein Beobachtungswert aktiv —",l10nStrings.debugBarAddWatch="Beobachtungswert hinzufügen",l10nStrings.debugBarDeleteWatch="Beobachtungswert löschen",l10nStrings.debugBarWatchAll="Alle beobachten",l10nStrings.debugBarWatchNone="Alle löschen",l10nStrings.debugBarLabelAdd="Hinzufügen",l10nStrings.debugBarLabelWatch="Beobachten",l10nStrings.debugBarLabelTurn="Zug",l10nStrings.debugBarLabelViews="Ansichten",l10nStrings.debugBarViewsToggle="Fehlersuche-Ansichten umschalten",l10nStrings.debugBarWatchToggle="Beobachtungs-Feld umschalten",l10nStrings.uiBarToggle="Menüleiste umschalten",l10nStrings.uiBarBackward="Einen Schritt im {identity}-Ablauf zurück",l10nStrings.uiBarForward="Einen Schritt im {identity}-Ablauf nach vor",l10nStrings.uiBarJumpto="Zu einem bestimmten Punkt im {identity}-Ablauf springen",l10nStrings.jumptoTitle="Springe zu",l10nStrings.jumptoTurn="Zug",l10nStrings.jumptoUnavailable="Keine Sprungmarken verfügbar…",l10nStrings.savesTitle="Speicherstände",l10nStrings.savesDisallowed="Speichern ist in dieser Passage nicht erlaubt.",l10nStrings.savesIncapable="{_warningIntroLacking} Zum Speichern benötigte Features, darum ist es in dieser Sitzung nicht möglich, den Spielstand zu speichern.",l10nStrings.savesLabelAuto="Auto-Speicherstand",l10nStrings.savesLabelDelete="Löschen",l10nStrings.savesLabelExport="Auf Datenträger speichern…",l10nStrings.savesLabelImport="Von Datenträger laden…",l10nStrings.savesLabelLoad="Laden",l10nStrings.savesLabelClear="Alle löschen",l10nStrings.savesLabelSave="Speichern",l10nStrings.savesLabelSlot="Slot",l10nStrings.savesUnavailable="Keine Speicherslots gefunden…",l10nStrings.savesUnknownDate="unbekannt",l10nStrings.settingsTitle="Einstellungen",l10nStrings.settingsOff="Aus",l10nStrings.settingsOn="Ein",l10nStrings.settingsReset="Auf Standardwerte zurücksetzen",l10nStrings.restartTitle="Neustart",l10nStrings.restartPrompt="Bist du sicher, dass du neu starten möchtest? Nicht gespeicherter Fortschritt ginge damit verloren.",l10nStrings.shareTitle="Teilen",l10nStrings.autoloadTitle="Automatisches Laden",l10nStrings.autoloadCancel="Gehe zum Start",l10nStrings.autoloadOk="Auto-Speicherstand laden",l10nStrings.autoloadPrompt="Ein Auto-Speicherstand existiert bereits. Laden oder zurück an den Start?",l10nStrings.macroBackText="Zurück",l10nStrings.macroReturnText="";
  }

  $('html').attr('lang', setup.i18n.langs[settings.lang]);
}

function changeLanguage() {
  /* Reload the application to ensure that proper	localizations are loaded */
  window.location.reload();
}

Setting.addList('lang', {
  label    : 'Language/Sprachen',
  list     : setup.i18n.labels(),
  default  : setup.i18n.labelFromCode('de'),
  onInit   : initLanguage,
  onChange : changeLanguage
});

/***********
Translations 
***********/
setup.text = {};
setup.text["StoryMenu"] = {
	"1": {
		de: 'Geister',
		en: 'Ghosts'
  },
	"2": {
		de: 'Hilfe',
		en: 'Help'
  },
  "3": {
		de: 'Impressum',
		en: 'Legal Notice'
  }
};
setup.text["installation"] = {
  
	"1": {
		de: 'Herzlich Willkommen zu:',
		en: 'Welcome to:'
  },
  "2": {
		de: 'Diese Rallye ist eine Test-Version und nicht das finale Produkt. Sie ist nur für Testzwecke gedacht.',
		en: 'This rally is a test version and not the final product. It is intended for testing purposes only.'
  }
};

/*************
Mapbox imports
*************/
importStyles("https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css");
setup.mapboxLoaded = importScripts("https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js")

class CircularGeofenceRegion {
  constructor(opts) {
    Object.assign(this, opts)
  }
}

/********************
Fences initialization
********************/
setup.storyinit = function () {
  const fence1 = new CircularGeofenceRegion({
    id: 'johannistorturm',
    latitude: 51.325011,
    longitude: 12.395977,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence2 = new CircularGeofenceRegion({
    id: 'marsfeld',
    latitude: 51.755591,
    longitude: 11.458664,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence3 = new CircularGeofenceRegion({
    id: 'grauer_hof',
    latitude: 51.756137,
    longitude: 11.453562,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence4 = new CircularGeofenceRegion({
    id: 'markt',
    latitude: 51.755471,
    longitude: 11.455375,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence5 = new CircularGeofenceRegion({
    id: 'holzmarkt',
    latitude: 51.755030,
    longitude: 11.457358,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence6 = new CircularGeofenceRegion({
    id: 'halken',
    latitude: 51.753586,
    longitude: 11.455084,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence7 = new CircularGeofenceRegion({
    id: 'rabenturm',
    latitude: 51.757476,
    longitude: 11.453929,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence8 = new CircularGeofenceRegion({
    id: 'ozelot',
    latitude: 51.757325,
    longitude: 11.456485,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence9 = new CircularGeofenceRegion({
    id: 'pferd',
    latitude: 51.757570,
    longitude: 11.453082,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence10 = new CircularGeofenceRegion({
    id: 'schildkröte',
    latitude: 51.755718,
    longitude: 11.454497,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence11 = new CircularGeofenceRegion({
    id: 'schlange',
    latitude: 51.754062,
    longitude: 11.455933,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence12 = new CircularGeofenceRegion({
    id: 'schwein',
    latitude: 51.753561,
    longitude: 11.454144,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence13 = new CircularGeofenceRegion({
    id: 'truthahn',
    latitude: 51.752776,
    longitude: 11.453532,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence14 = new CircularGeofenceRegion({
    id: 'zebra',
    latitude: 51.751645,
    longitude: 11.453348,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence15 = new CircularGeofenceRegion({
    id: 'affe',
    latitude: 51.750972,
    longitude: 11.454920,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence16 = new CircularGeofenceRegion({
    id: 'eule',
    latitude: 51.751370,
    longitude: 11.457007,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence17 = new CircularGeofenceRegion({
    id: 'gazelle',
    latitude: 51.752479,
    longitude: 11.458342,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence18 = new CircularGeofenceRegion({
    id: 'katze',
    latitude: 51.753686,
    longitude: 11.458826,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence19 = new CircularGeofenceRegion({
    id: 'krokodil',
    latitude: 51.754571,
    longitude: 11.458813,
    radius: 30, // meters
    alreadyEntered: false
  });

  const fence20 = new CircularGeofenceRegion({
    id: 'lama',
    latitude: 51.756125,
    longitude: 11.459156,
    radius: 30, // meters
    alreadyEntered: false
  });

/* Die oben definierten Fences müssen diesem Array zugewiesen werden */	
  const fences = [fence1, fence2, fence3, fence4, fence5, fence6, fence7, fence8, fence9, fence10, fence11, fence12, fence13, fence14, fence15, fence16, fence17, fence18, fence19, fence20]
  return fences;
};

/*****************
Window Geolocation 
*****************/
(function () {
  
  window.geolocation = {

    available: function() {
      return ("geolocation" in navigator && typeof navigator.geolocation.getCurrentPosition === "function");
    },

		/* Optionen für Mapbox Geolocation */
    getGeolocateControl: function() {
      return {
        positionOptions: {
          enableHighAccuracy: true
        },
        trackUserLocation: true,
        showUserHeading: true
      }
    },
    
		/* Test ob ein Fence innerhalb der aktuellen Geokoordinaten ist */
    inside: function(lat1, lon1, radius, lat2, lon2) {
		  const R = 6371; // Earth's radius in km
      const dLat = (lat2-lat1) * Math.PI / 180;
      const dLon = (lon2-lon1) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
      Math.cos(lat1 * Math.PI / 180 ) * Math.cos(lat2 * Math.PI / 180 ) *
      Math.sin(dLon/2) * Math.sin(dLon/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      const distance = R * c * 1000;
      return distance < radius;
	  },
		
    /* Erstellt einen sichtbaren Kreis um einen Fence */
    createGeoJSONCircle: function(center, radius) {
      const points = 64;
      const coords = {
        latitude: center[1],
        longitude: center[0]
      };
  
      let ret = [];
      const distanceX = radius / (111.320 * Math.cos(coords.latitude * Math.PI / 180));
      const distanceY = radius / 110.574;
  
      var theta, x, y;
      for (var i = 0; i < points; i++) {
        theta = (i / points) * (2 * Math.PI);
        x = distanceX * Math.cos(theta);
        y = distanceY * Math.sin(theta);
  
        ret.push([coords.longitude + x, coords.latitude + y]);
      }
      ret.push(ret[0]);
  
      return {
        "type": "geojson",
        "data": {
          "type": "FeatureCollection",
          "features": [{
            "type": "Feature",
            "geometry": {
              "type": "Polygon",
              "coordinates": [ret]
            }
          }]
        }
      };
    }

  };

/***********
Window Video  
***********/
  window.video = {
    showButtonsOnVideoEnd: function() {
      $(document).on(":passagedisplay", function() {
        const video = document.querySelector('video');
        if (video) {
          const btnGroup = document.querySelector('.btn-group');
          if (btnGroup) btnGroup.style.display = 'none';
          video.onended = (event) => {
            if (btnGroup) btnGroup.style.display = 'inline';
          };
        };
      });
    }
  }

}());

:: StoryStylesheet [stylesheet]
@import url("https://use.typekit.net/mph1xdw.css");

:root {
  /* Primäre Farben */
  --primary-color: #000000;
  --primary-dark-color: #000000;

  /* Sekundäre Farben */
  --secondary-color: #FFDE03;
  --secondary-dark-color: ##FFDE03;

  /* Hintergrundfarben */
  --background-color: #000000;
  --background-light-color: #FFFFFF;
  --background-darken-color: #00000070;
  --background-dark-color: #44444470;

  /* Textfarben */
  --button-color: #26262670;
  --text-color: #323140;
  --text-hover-color: #F5553B;
  --text-light-color: #FFFFFF;
}

@font-face {
  font-family: asl;
  src: url(fonts/asl2.otf);
}

@font-face {
  font-family: para;
  src: url(fonts/para.otf);
}

@-webkit-keyframes fade-out {
  0% {opacity: 1;}
  100% {opacity: 0;} 
}

@keyframes fade-out {
  0% {opacity: 1;}
  100% {opacity: 0;} 
} 

/* ####################HTML ELEMENTS#################### */
html {
  height: 100%;
}

html * {
    box-sizing: border-box;
}

body {
  background-color: var(--background-color);
  color: var(--text-color);
  font-family: 'Roboto Slab', serif;	
  font-size: 16px;
  height: 100%;
  margin: 0;
  padding: 0;
  width: 100%;
}

audio, canvas, progress, video {
  max-width: none;
  vertical-align: middle;
}

h1 {
  color: var(--text-light-color);
  font-family: "shlop", sans-serif;
  font-size: 9vh;
  font-style: normal;
  font-weight: 400;
  line-height: 10vh;
  margin-bottom: 1rem;
  margin-left: 2vw;
  margin-right: 2vw;
  text-align: center;
  text-shadow: 3px 3px 1px black;
  word-break: keep-all;
}

h2 {
  color: var(--text-light-color);
  font-family: "myriad-pro", sans-serif;
  font-size: 3vh;
  font-style: normal;
  font-weight: 700;
  line-height: 4vh;
  margin-left: 20px;
  margin-right: 30px;
  text-align: center;
  text-shadow: 3px 3px 1px black;
  word-break: break-word;
}

h3 {
  color: var(--text-light-color);
  font-family: "myriad-pro", sans-serif;
  font-size: 4vh;
  font-weight: 900;
  line-height: 4vh;
  margin: 0;
  text-align: center;
  word-break: break-word;
}

h4 {
  color: var(--text-light-color);
  font-family: "myriad-pro", sans-serif;
  line-height: 1.5vh;
  margin-bottom: -5vh;
  margin-left: 1.5vw;
  margin-right: 2vw;
  text-align: center;
  word-break: break-word;
}

h5 {
  color: var(--text-light-color);
 font-family: "myriad-pro", sans-serif;
  font-size: 2vh;
  line-height: 2vh;
  margin-bottom: 0vh;
  margin-left: 2vw;
  margin-right: 2vw;
  text-align: center;
  word-break: break-word;
}

h6 {
  color: #F2F2F2;
  font-family: 'Caveat Brush', cursive;
  font-size: 15vh;
  font-weight: normal;
  line-height: 12vh;
  margin-bottom: 0;
  margin-bottom: 1rem;
  margin-left: 10vw;
  margin-right: 10vw;
  margin-top: 0;
  text-align: center;
  word-break: break-word;
}

p {
  color: var(--text-light-color);
  font-family: transat, sans-serif;
  font-size: 3vh;
  font-style: italic;
  font-weight: 500;
  line-height: 4vh;
  margin-left: 20px;
  margin-right: 30px;
  text-align: center;
  word-break: break-word;
}

a {
  color: var(--secondary-color);
}

button {
  background: var(--background-light-color);
  border-radius: 4px;
  border: 2px solid #000000; 
  color: var(--button-color);
  display: inline-block;
  font-family: itc-benguiat-condensed, sans-serif;
  font-size: 3vh;
  font-weight: 400;
  line-height: 4vh;
  margin-top: 1vh;
  text-align: center;
  text-decoration: none;
}

button:hover {
  background-color: var(--text-hover-color);
  border-color: var(--text-hover-color);
}

details {
  width: 80%;
  margin: 0 auto ;
  background: var(--button-color);
  margin-bottom: .5rem;
  box-shadow: 0 .1rem 1rem -.5rem rgba(0,0,0,.4);
  border-radius: 5px;
  overflow: hidden;
}

summary {
  padding: 1rem;
  display: block;
  background: var(--background-dark-color);
  padding-left: 2.2rem;
  position: relative;
  cursor: pointer;
}

summary:before {
  content: '';
  border-width: .4rem;
  border-style: solid;
  border-color: transparent transparent transparent var(--background-light-color);
  position: absolute;
  top: 1.5rem;
  left: 1rem;
  transform: rotate(0);
  transform-origin: .2rem 50%;
  transition: .25s transform ease;
}

details[open] > summary:before {
  transform: rotate(90deg);
}

details summary::-webkit-details-marker {
  display:none;
}

details > ul {
  padding-bottom: 1rem;
  margin-bottom: 0;
}

/* ####################SUGARCUBE#################### */
#ui-bar {
  background-color: transparent;
  border-right: 0;
}

#ui-bar-body {
  background-color: var(--background-color);
  background-image: url('images/menu.jpg');
  background-position: center;
  border-right: solid 1px;
  height: 100%;
  margin: 0;
  width: 34vh;
}

#ui-bar-toggle {
  border: none;
  color: var(--text-light-color);
  font-size: 4vh;
  left:0;
  position: fixed;
  right: unset;
  top: 3vh;
}

#ui-bar-toggle:before {
  color: var(--secondary-color);
  content: "\e804";
}

#ui-bar-toggle:hover {
  background-color: transparent;
  border: none;
}

#ui-bar-history {
  display: none;
}

#ui-bar.stowed~#story {
  margin-left: 0;
}

#ui-bar.stowed #ui-bar-toggle:before {
  color: var(--secondary-color);
  content: "\e82e";
}

#ui-dialog-body ul {
  display: flex;
  justify-content: center;
}

#menu-item-share, #menu-item-saves {
  display: none;
}

#menu li a {
  border-radius: 4px;
  border: 2px solid var(--secondary-color);
  color: var(--secondary-color);
  font-family: "myriad-pro", sans-serif;
  font-size: 3vh;
  font-weight: 400;
  line-height: 4vh;
  margin-bottom: 1vh;
  text-transform: none;
}

/* ####################STORY PASSAGE#################### */
#story {
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	height: 100%;
	margin: 0;
	padding: 4vh 0;
}

#story-title {
  display: none;
}

#passages {
  height: 100%;
}

.passage {
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: space-between;
}

/* ####################WRAPPER BUTTONS#################### */
.wrapper {
  flex-grow: 1;
  height: 100%;
  overflow: auto;
  z-index: 20;
}

.btn-group {  
  margin: 0 auto 2vh;
  text-align: center;
  z-index: 20;
}

.btn-group button {
  background: var(--background-darken-color);
  border-radius: 4px;
  border: 2px solid var(--secondary-color);
  box-shadow: 2px 2px rgba(0,0,0,0.2), 2px 2px rgba(0,0,0,0.19);
  color: var(--secondary-color);
  font-family: "myriad-pro", sans-serif;
  font-size: 3vh;
  font-weight: 400;
}

.macro-return {
  background: var(--background-darken-color);
  border-radius: 4px;
  border: 2px solid var(--secondary-color);
  box-shadow: 2px 2px rgba(0,0,0,0.2), 2px 2px rgba(0,0,0,0.19);
  display: inline-block;
  font-weight: 900;
  margin-top: 1vh;
  padding: 0.4em;
}

.macro-return:before, .return a:before {
  content: "\e821\00a0";
  font-family: tme-fa-icons;
  padding-left: 4px;
}

.next a:before {
  content: "\e822\00a0";
  font-family: tme-fa-icons;
  padding-left: 8px;
}

.retry a:before {
  content: "\e824\00a0";
  font-family: tme-fa-icons;
  padding-left: 8px;
}

.help:before {
	content: "\e808\00a0";
  font-family: tme-fa-icons;
  padding-left: 8px;
}

.install::before {
  content: "\e829\00a0";
  font-family: tme-fa-icons;
  padding-left: 8px;
}
/* ####################MAP#################### */

/* dvh = Dynamic View High um die komplette Höhe der Navigation Bar zu nutzen */
#map {
  bottom: 0;
  height: 100vh;
  height: 100dvh;
  position: absolute;
  top: 0;
  width: 100%;
}

/* Macht den Geolocate-Button unsichtbar */
.mapboxgl-ctrl-group button.mapboxgl-ctrl-geolocate { 
  display: none;
}
  
/* ####################MODEL VIEWER#################### */
model-viewer {
  width: 90%;
  height: 50%;
  background-color: rgba(0, 0, 0, 0.75);
  margin: 0 5%;
}

.Hotspot {
  background: #fff;
  border-radius: 32px;
  border: 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
  box-sizing: border-box;
  cursor: pointer;
  height: 24px;
  padding: 8px;
  position: relative;
  transition: opacity 0.3s;
  width: 24px;
}

.Hotspot:not([data-visible]) {
  background: transparent;
  border: 4px solid #fff;
  box-shadow: none;
  height: 32px;
  pointer-events: none;
  width: 32px;
}

.Hotspot:focus {
  border: 4px solid rgb(0, 128, 200);
  height: 32px;
  outline: none;
  width: 32px;
}

.Hotspot > * {
  opacity: 1;
  transform: translateY(-50%);
}

.HotspotAnnotation{
  background: #fff;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
  color: rgba(0, 0, 0, 0.8);
  display: block;
  font-family: Futura, Helvetica Neue, sans-serif;
  font-size: 18px;
  font-weight: 700;
  left: calc(100% + 1em);
  max-width: 128px;
  overflow-wrap: break-word;
  padding: 0.5em 1em;
    position: absolute;
  top: 50%;
  width: max-content;
}

.Hotspot:not([data-visible]) > * {
  opacity: 0;
  pointer-events: none;
  transform: translateY(calc(-50% + 4px));
  transition: transform 0.3s, opacity 0.3s;
}

#ar-button {
  background-image: url(./images/ar_icon.png);
  background-repeat: no-repeat;
  background-size: 20px 20px;
  background-position: 12px 50%;
  background-color: #fff;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  bottom: 16px;
  padding: 0px 16px 0px 40px;
  font-size: 14px;
  color:#4285f4;
  height: 36px;
  line-height: 36px;
  border-radius: 18px;
  border: 1px solid #DADCE0;
}

#ar-button:active {
  background-color: #E8EAED;
}

#ar-button:focus {
  outline: none;
}

#ar-button:focus-visible {
  outline: 1px solid #4285f4;
}

/* ####################PASSAGE ELEMENTS#################### */

#myVideo {
  bottom: 0;
  height: 100%;
  margin-left: 50vw;
  position: fixed;
  transform: translate(-50%);
  width: auto;
  z-index: 10;
}

.image1 {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 60%;
}

tw-hook[name="fade-out"] {
	-webkit-animation-name: fade-out;
	-webkit-animation-duration: 10s;
	-webkit-animation-fill-mode: both;
	animation-name: fade-out;
	animation-duration: 10s;
	animation-fill-mode: both;
}

.p1 {
  display: inherit;
  font-family: para;
  font-size: 4vh;
  margin-top: 1vh;
}

.p2 {
  color: var(--secondary-color);
  display: inherit;
  font-family: para;
  font-size: 10vh;
  line-height: 10vh;
  margin-left: 5vw;
  margin-right: 5vw;
}

.p3 {
    font-family: para;
  	color: var(--text-light-color);
    font-size: 4vh;
    line-height: 0vh;
    display: inherit;
    text-shadow: 3px 3px 1px black;
    letter-spacing: 3vw;
}

.hide {
  display: none;
}

.passage a:hover {
  color: #404040;
}

.bild_ort {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}